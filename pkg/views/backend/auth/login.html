{{define "content"}}
<h4>Hello! let's get started</h4>
<h6 class="font-weight-light">Sign in to continue.</h6>
<form class="pt-3" hx-post="/login" hx-on="htmx:afterRequest" id="loginForm" method="post" hx-target="#form-messages">
  <div id="form-messages"></div>
  <div class="form-group">
    <input type="email" class="form-control form-control-lg" id="exampleInputEmail1" placeholder="Email" name="email"
      required>
  </div>
  <div class="form-group">
    <input type="password" class="form-control form-control-lg" id="exampleInputPassword1" placeholder="Password"
      name="password" required>
  </div>
  <div class="mt-3">
    <button type="submit" id="submtBtn" class="btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn submtBtn">SIGN
      IN</button>
  </div>
  <div class="my-2 d-flex justify-content-between align-items-center">
    <div class="form-check">
      <label class="form-check-label text-muted">
        <input type="checkbox" class="form-check-input">
        Keep me signed in
      </label>
    </div>
    <a href="#" class="auth-link text-black">Forgot password?</a>
  </div>
  <div class="text-center mt-4 font-weight-light">
    Don't have an account? <a href="/register" class="text-primary">Create</a>
  </div>
</form>
<script>
  document.getElementById("loginForm").addEventListener('htmx:afterRequest', function (event) {
    // if (event.detail.xhr.response) {
    //   var response = JSON.parse(event.detail.xhr.response);
    //   if (response.redirect) {
    //     $("#submtBtn").prop("disabled", false)
    //     displayMessage("Login Successfully!",2000);
    //     setInterval(() => {
    //       window.location.href = response.redirect
    //     }, 2000);

    //   }

    // }
      var redirectUrlElement = document.getElementById("redirect");
      if (redirectUrlElement) {
        var redirectUrl = redirectUrlElement.value;
        if (redirectUrl != null && redirectUrl != "") {
          $("#submtBtn").prop("disabled", false)
          displayMessage("Login Successfully!", 2000);
          setTimeout(() => {
            window.location.href = redirectUrl;
          }, 2000);
        }
      }
  })
</script>
{{end}}